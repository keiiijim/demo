<html>

    <head>
        <link rel="icon" type="image/png" href="/favicon.png">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <script async src="//www.googletagservices.com/tag/js/gpt.js"></script>
        <!-- <script async src="prebid2.31.0.js"></script> -->
        <script async src="prebid7.49.0.js"></script>
        <script>
          
            /* パラメータを受取る側 */
 
                /* アドレスの「?」以降の引数(パラメータ)を取得 */
                var pram=location.search;

                /* 先頭の?をカット */
                pram=pram.substring(1);
                /* 「&」で引数を分割して配列に */
                var pair=pram.split("&");
                var i=temp="";
                var key=new Array();
                for (i=0; i < pair.length; i++) {
                    /* 配列の値を「=」で分割 */
                    temp=pair[i].split("=");
                    keyName=temp[0];
                    keyValue=temp[1];
                    /* キーと値の連想配列を生成 */
                    key[keyName]=keyValue;
                }
                var id="";
                var size="";
                
                /* id */
                 if (!key["id"] || key["id"]==""){
                    id="匿名希望";
                }else{
                    /* コード変換 */
                    id=unescape(key["id"]);
                }
                /* size */
                
                 if(key["size"]!="") {
                    size=unescape(key["size"]);
                }else{
                    size="size不明";
                }

 


          
          
          var page_id = id;               
          
            var div_sizes;
            if(size == "rect"){ div_sizes = [[300, 250]];}
            else if(size == "sp_bil"){ div_sizes = [[320, 180]];}
            else if(size == "pc_bil"){ div_sizes = [[970, 250]];}
            
            


            
            
            var PREBID_TIMEOUT = 1000;
            var FAILSAFE_TIMEOUT = 3000;

            var adUnits = [
                {
                    code: '/18339668/prod-stg-adg/Multi_Prebid_FriendlyIframe',
                    mediaTypes: {
                        banner: {
                            sizes: div_sizes
                        }
                    },
                    bids: [{
                        bidder: 'adg',
                        params: {
                            id: page_id
                        }
                    }]
                },
                {
                    code: '/18339668/prod-stg-adg/Multi_Prebid_SafeFrame',
                    mediaTypes: {
                        banner: {
                            sizes: div_sizes
                        }
                    },
                    bids: [{
                        bidder: 'adg',
                        params: {
                            id: page_id
                        }
                    }]
                }
            ];

            // ======== DO NOT EDIT BELOW THIS LINE =========== //
            var googletag = googletag || {};
            googletag.cmd = googletag.cmd || [];
            googletag.cmd.push(function() {
                googletag.pubads().disableInitialLoad();
            });

            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            pbjs.que.push(function() {
                pbjs.setConfig({
		userSync: {
			auctionDelay: 500,
			userIds: [{
				name: 'criteo'
			}, {
				name: 'sharedId',
				storage: {
					name: "_sharedID",
					type: "cookie",
					expires: 90
				}
			}, {
				name: 'id5Id',
				params: {
					partner: 1142
				},
				storage: {
					type: "html5",
					name: "id5id",
					expires: 90,
					refreshInSeconds: 28800
				}
			},{
				name: 'novatiq',
				params: {
					useSharedId: false,
					useCallbacks: true,
					urlParams: {
						novatiqId: "snowflake",
						useStandardUuid: true,
						useSspId: false,
						useSspHost: false
					},
				}
			}]
		}
	});
                pbjs.addAdUnits(adUnits);
                pbjs.requestBids({
                    bidsBackHandler: initAdserver,
                    timeout: PREBID_TIMEOUT
                });
            });

            function initAdserver() {
                if (pbjs.initAdserverSet) return;
                pbjs.initAdserverSet = true;
                googletag.cmd.push(function() {
                    pbjs.que.push(function() {
                        pbjs.setTargetingForGPTAsync();
                        googletag.pubads().refresh();
                    });
                });
            }
            // in case PBJS doesn't load
            setTimeout(function() {
                initAdserver();
            }, FAILSAFE_TIMEOUT);

            googletag.cmd.push(function() {
                googletag.defineSlot('/18339668/prod-stg-adg/Multi_Prebid_FriendlyIframe', div_sizes, 'div').addService(googletag.pubads());
                googletag.defineSlot('/18339668/prod-stg-adg/Multi_Prebid_SafeFrame', div_sizes, 'div2').addService(googletag.pubads());
                googletag.pubads().enableSingleRequest();
                googletag.enableServices();
            });

        </script>

    </head>

    <body>
        
 
        
        <h2>Prebid.js CheckTool </h2>    <br>
        <p><b>設定枠情報</b></p>
        <p id="output-message"></p>
        <p id="output-message2"></p>
        <script>
          /* アドレスの「?」以降の引数(パラメータ)を取得 */
                var pram=location.search;

                /* 先頭の?をカット */
                pram=pram.substring(1);
                /* 「&」で引数を分割して配列に */
                var pair=pram.split("&");
                var i=temp="";
                var key=new Array();
                for (i=0; i < pair.length; i++) {
                    /* 配列の値を「=」で分割 */
                    temp=pair[i].split("=");
                    keyName=temp[0];
                    keyValue=temp[1];
                    /* キーと値の連想配列を生成 */
                    key[keyName]=keyValue;
                }
                var id="";
                var size="";
                
                /* id */
                 if (!key["id"] || key["id"]==""){
                    id="匿名希望";
                }else{
                    /* コード変換 */
                    id=unescape(key["id"]);
                }
                /* size */
                
                 if(key["size"]!="") {
                    size=unescape(key["size"]);
                }else{
                    size="size不明";
                }
            
       const output = "Page-ID: " + id;
      const output2 = "prebid/GAMへの設定サイズ: " + size;
      //出力用のp要素にメッセージを表示
      document.getElementById("output-message").innerHTML = output;
      document.getElementById("output-message2").innerHTML = output2;        
        </script>
        
        <hr>
    
        <p>console.logへの表示</P>
<p><b>上の枠</b> <br>PMP配信時：console.log('PMP LineItem - FriendlyIframe'); <br>    OA配信時:　console.log('OA LineItem - friendlyframe');</P>
<p><b>下の枠</b> <br>PMP配信時：console.log('PMP LineItem - Safeframe');     <br>OA配信時:console.log('OA LineItem - safeframe');</P> <br>
<hr>
    <br>
        <h5> - friendly iframe</h5>
        <div>
            <div id='div'>
                <script type='text/javascript'>
                    googletag.cmd.push(function() {
                        googletag.display('div');
                    });
                </script>
            </div>
        </div>    <br>
        <hr>    <br>
        <h5> - safe iframe</h5>
        <div>
            <div id='div2'>
                <script type='text/javascript'>
                    googletag.cmd.push(function() {
                        googletag.display('div2');
                    });
                </script>
            </div>
        </div>


<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
END
    </body>

</html>
